<div class="story">
	<div class="edit-controls col-md-12" ng-show="$parent.hasAuthorization()">
		<a class="btn edit" title="Edit" ng-show="$parent.hasAuthorization() && !members[0].isEditing" data-ng-click="members[0].isEditing = !members[0].isEditing">
			<i class="glyphicon glyphicon-edit"></i>
		</a>
		Edit Story
		<div class="clearfix"></div>
	</div>
	<form name="editStoryForm" class="edit-form col-md-12" ng-show="$parent.hasAuthorization() && members[0].isEditing" role="form"  novalidate>
		<div class="form-group" ng-class="{ 'has-error' : submitted && editStoryForm.role.$invalid }">
			<label for="role" class="col-md-3">Role:</label>
			<input class="story-edit col-md-9" ng-model="members[0].role" name="role"></input>
			<div ng-show="submitted && editStoryForm.role.$invalid" class="help-block">
				<p ng-show="editStoryForm.role.$error.required">Role is required</p>
			</div>
			<div class="clearfix"></div>
		</div>
		<div class="form-group" ng-class="{ 'has-error' : submitted && editStoryForm.name.$invalid }">
			<label for="name" class="col-md-3">Name:</label>
			<input class="story-edit col-md-9" ng-model="members[0].name" name="name"></input>
			<div ng-show="submitted && editStoryForm.name.$invalid" class="help-block">
				<p ng-show="editStoryForm.name.$error.required">Name is required</p>
			</div>
			<div class="clearfix"></div>
		</div>
		<div class="form-group" ng-class="{ 'has-error' : submitted && editStoryForm.group.$invalid }">
			<label for="group" class="col-md-3">group:</label>
			<input class="story-edit col-md-9" ng-model="members[0].group" name="group"></input>
			<div ng-show="submitted && editStoryForm.group.$invalid" class="help-block">
				<p ng-show="editStoryForm.group.$error.required">Group is required</p>
			</div>
			<div class="clearfix"></div>
		</div>
		<div class="form-group" ng-class="{ 'has-error' : submitted && editStoryForm.photo.$invalid }">
			<label for="photo" class="col-md-3">Photo:</label>
			<input class="story-edit col-md-9" ng-model="members[0].photo" name="photo"></input>
			<div ng-show="submitted && editStoryForm.photo.$invalid" class="help-block">
				<p ng-show="editStoryForm.photo.$error.required">Photo is required</p>
			</div>
			<div class="clearfix"></div>
		</div>
		<div class="form-group" ng-class="{ 'has-error' : submitted && editStoryForm.photoClass.$invalid }">
			<label for="photoClass" class="col-md-3">Photo Class:</label>
			<input class="story-edit col-md-9" ng-model="members[0].photoClass" name="photoClass"></input>
			<div ng-show="submitted && editStoryForm.photoClass.$invalid" class="help-block">
				<p ng-show="editStoryForm.photoClass.$error.required">Photo Class is required</p>
			</div>
			<div class="clearfix"></div>
		</div>
		<div class="form-group" ng-class="{ 'has-error' : submitted && editStoryForm.sort.$invalid }">
			<label for="sort" class="col-md-3">Sort:</label>
			<input class="story-edit col-md-9" ng-model="members[0].sort" name="sort"></input>
			<div ng-show="submitted && editStoryForm.sort.$invalid" class="help-block">
				<p ng-show="editStoryForm.sort.$error.required">Sort is required</p>
			</div>
			<div class="clearfix"></div>
		</div>
		<div class="form-group" ng-class="{ 'has-error' : submitted && editStoryForm.story.$invalid }">
			<label for="story" class="col-md-3">Story:</label>
			<textarea class="story-edit col-md-9" ng-model="members[0].story" ng-model-options="{ updateOn: 'default', debounce: {'default': 5000, 'blur': 0}}"></textarea>
			<div ng-show="submitted && editStoryForm.story.$invalid" class="help-block">
				<p ng-show="editStoryForm.story.$error.required">Story is required</p>
			</div>
			<div class="clearfix"></div>
		</div>
		<div class="form-group">
			<button mean-token="'update-submit'" type="submit" ng-click="$parent.update(members[0], editStoryForm.$valid)" class="submit col-md-5">Save</button>
			<button type="cancel" class="cancel col-md-5" ng-click="members[0].isEditing = !members[0].isEditing">Cancel</button>
		</div>
	</form>
	<div class="clearfix"></div>
	<div ng-show="!members[0].isEditing">
		<div class="story-photo-wrapper {{members[0].photoClass}}">
			<img class="{{members[0].photoClass}}" ng-if="members[0].photo" ng-src="{{members[0].photo}}"></img>
		</div>
		<article class="story-text">
			<p ng-bind-html="members[0].story">{{members[0].story}}</p>
		</article>
	</div>
	<div class="clearfix"></div>
</div>